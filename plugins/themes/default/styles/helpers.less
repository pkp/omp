/**
 * @file plugins/themes/default/styles/components.less
 *
 * Copyright (c) 2014-2015 Simon Fraser University Library
 * Copyright (c) 2003-2015 John Willinsky
 * Distributed under the GNU GPL v2. For full terms see the file docs/COPYING.
 *
 * @brief Helper classes and reusable components
 */

//
// A horizontal navigation list
//
// This component is applied to the hierarchical unordered navigation lists. It
// supports nested lists that will be displayed on hover/focus.
//
// <ul class="pkp_nav_list">
//   <li class="has_submenu">
//     <a href="#">1</a>
//     <ul>
//       <li>
//         <a href="#">1-a</a>
//       </li>
//     </ul>
//   </li>
// </ul>
//
.pkp_nav_list {
	margin: 0;
	padding: 0;
	list-style: none;

	li {
		position: relative;
		display: inline-block;
	}

	a {
		display: inline-block;
		padding-left: 1em;
		padding-right: 1em;
		text-decoration: none;
		padding-top: @half;
		padding-bottom: @half;

		&:hover,
		&:focus {
			color: @primary;
		}
	}

	ul {
		position: absolute;
		top: 100%;
		left: -9999px;
		z-index: 1000;
		width: 15em;
		margin: 0;
		padding: 0;
		background: @primary-lift;

		li {
			display: block;
		}

		ul {
			top: 0;
			background: @primary-lift;
			border-left: 4px solid @primary;
		}

		a {
			display: block;

			&:hover,
			&:focus {
				background: @primary;
			}
		}

		li:hover > ul,
		li:focus > ul,
		li.in_focus > ul {
			left: 100%;
		}
	}

	li:hover > ul,
	li:focus > ul,
	li.in_focus > ul {
		left: 0;
	}

	// Ensure a dropdown doesn't open beyond the edge of the screen by aligning
	// such dropdowns to the right rather than the left.
	li.align_right:hover > ul,
	li.align_right:focus > ul,
	li.align_right.in_focus > ul {
		left: auto;
		// Position in center on very small screens to prevent if from flying
		// off to the left. Not a perfect solution, but should suffice for the
		// overwhelming majority of cases
		width: 10em;
		right: 50%;
		.transform(translateX(50%));

		@media(min-width: @screen-phone) {
			right: 0;
			.transform(none);
			width: 15em;
		}
	}

	// Dropdown caret indicating submenus
	// @todo these can probably abstracted into reusable components
	.has_submenu a:first-child {
		margin-right: 0;
	}

	.has_submenu > a:after {
		position: relative;
		display: inline-block;
		content: '';
		width: 0;
		height: 0;
		margin-left: 0.25em;
		border-top: 4px solid;
		border-right: 4px solid transparent;
		border-left: 4px solid transparent;
		vertical-align: middle;
		overflow: hidden;
	}

	ul .has_submenu > a:after {
		border-left: 4px solid;
		border-top: 4px solid transparent;
		border-bottom: 4px solid transparent;
		border-right: 4px solid transparent;
	}

	.has_submenu:hover > a:after,
	.has_submenu:focus > a:after,
	.has_submenu.in_focus > a:after {
		opacity: 0;
	}
}
